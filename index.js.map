{"version":3,"file":"index.js","sources":["../src/js/render-funciton.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const photoList = document.querySelector('.gallery');\nexport const createImgList = imgInfo => {\n  return `\n  <div class=\"photo-el\">\n  <a href=\"${imgInfo.largeImageURL}\">\n    <img class=\"mini-image\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\">\n  </a>\n  <div class=\"photo-descr\">\n  <div class=\"descr-el\"><h2 class=\"descr-header\">Likes</h2><p class=\"descr-text\">${imgInfo.likes}</p></div>\n  <div class=\"descr-el\"><h2 class=\"descr-header\">Views</h2><p class=\"descr-text\">${imgInfo.views}</p></div>\n  <div class=\"descr-el\"><h2 class=\"descr-header\">Comments</h2><p class=\"descr-text\">${imgInfo.comments}</p></div>\n  <div class=\"descr-el\"><h2 class=\"descr-header\">Downloads</h2><p class=\"descr-text\">${imgInfo.downloads}</p></div>\n  </div>\n  </div>`;\n};\n","import * as file2 from './render-funciton';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nconst loadingIndicator = document.querySelector('.loader');\nexport const loadButton = document.querySelector('.load-button');\nexport const form = document.querySelector('.js-form');\nlet pageNum = 1;\nlet lightbox;\nlet input;\nlet totalImage;\n\nconst fetchImgs = (value, input) => {\n  return axios.get(\n    `https://pixabay.com/api/?key=48328522-58f8fcf940ace01c2f71e55b2&q=${input}&image_type=photo&orientation=horizontal&safesearch=true&page=${value}&per_page=15`\n  );\n};\nconst renderImg = async () => {\n  try {\n    pageNum = 1;\n    const { data } = await fetchImgs(pageNum, input);\n    loadingIndicator.style.display = 'none';\n    if (data.totalHits === 0) {\n      iziToast.show({\n        theme: 'dark',\n        icon: 'icon-person',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'center',\n      });\n      form.reset();\n      file2.photoList.innerHTML = '';\n      loadButton.style.display = 'none';\n\n      return;\n    }\n    const galleryTemplate = data.hits\n      .map(el => file2.createImgList(el))\n      .join('');\n    file2.photoList.innerHTML = galleryTemplate;\n    lightbox = new SimpleLightbox('.gallery a', {\n      captions: true,\n      captionsData: 'alt',\n      captionDelay: 500,\n    });\n    totalImage = data.hits.length;\n    if (totalImage < 15) {\n      loadButton.style.display = 'none';\n      iziToast.show({\n        theme: 'dark',\n        icon: 'icon-person',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'center',\n      });\n      return;\n    }\n    loadButton.style.display = 'block';\n  } catch (err) {\n    loadingIndicator.style.display = 'none';\n    console.log(err);\n  }\n};\n\nexport const formSubmit = async event => {\n  try {\n    event.preventDefault();\n    loadingIndicator.style.display = 'block';\n    input = form.elements.input.value.trim();\n    if (input === '') {\n      iziToast.show({\n        theme: 'dark',\n        icon: 'icon-person',\n        message: 'Please enter data to search',\n        position: 'center',\n      });\n      loadingIndicator.style.display = 'none';\n      form.reset();\n      return;\n    }\n\n    await renderImg();\n\n    loadButton.addEventListener('click', loadMore);\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nconst loadMore = async event => {\n  try {\n    event.preventDefault();\n    loadingIndicator.style.display = 'block';\n    loadButton.style.display = 'none';\n    pageNum++;\n    input = form.elements.input.value.trim();\n    const { data } = await fetchImgs(pageNum, input);\n    const galleryTemplate = data.hits\n      .map(el => file2.createImgList(el))\n      .join('');\n    loadingIndicator.style.display = 'none';\n    file2.photoList.insertAdjacentHTML('beforeend', galleryTemplate);\n\n    lightbox.refresh();\n    totalImage += data.hits.length;\n    if (data.hits.length < 15 || totalImage >= data.totalHits) {\n      loadButton.style.display = 'none';\n      loadButton.removeEventListener('click', loadMore);\n      iziToast.show({\n        theme: 'dark',\n        icon: 'icon-person',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'center',\n      });\n      return;\n    }\n    loadButton.style.display = 'block';\n    const cart = file2.photoList.querySelector('.photo-el');\n    const rect = cart.getBoundingClientRect().height;\n    window.scrollBy({\n      top: 2 * rect,\n      behavior: 'smooth',\n    });\n  } catch (err) {\n    loadingIndicator.style.display = 'none';\n\n    console.log(err);\n  }\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport * as file1 from './js/pixabay-api';\nfile1.form.addEventListener('submit', file1.formSubmit);\n"],"names":["photoList","createImgList","imgInfo","loadingIndicator","loadButton","form","pageNum","lightbox","input","totalImage","fetchImgs","value","axios","renderImg","data","iziToast","file2.photoList","galleryTemplate","el","file2.createImgList","SimpleLightbox","err","formSubmit","event","loadMore","rect","file1.form","file1.formSubmit"],"mappings":"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"}